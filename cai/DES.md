# CAI - 自动点踩插件

自动点踩插件，支持多目标配置、冷却时间限制、标准表情和自定义表情。支持 Telegram Premium 用户设置多个表情反应。

## 功能特性

- **自动点踩**：对指定群组中目标用户的发言自动添加表情反应
- **多目标管理**：支持同时配置多个目标用户和群组
- **冷却时间**：每个目标独立配置冷却间隔，避免频繁操作
- **表情支持**：
  - 标准表情（emoji）
  - 自定义表情（通过 ID）
- **Premium 支持**：
  - 普通用户：最多设置 1 个表情
  - Premium 用户：最多设置 3 个表情
  - 自动检测账户类型，动态调整功能限制

## 配置文件

`cai_config.json` - 存储插件配置：

```json
{
  "enabled": false,
  "is_premium": false,
  "emojis": ["👎"],
  "targets": [],
  "stats": {
    "total_reacts": 0
  }
}
```

## 使用命令

| 命令 | 说明 |
|------|------|
| `,cai on` | 开启自动点踩功能 |
| `,cai off` | 关闭自动点踩功能 |
| `,cai set <用户ID> <群组ID> <频率(秒)>` | 添加目标配置 |
| `,cai remove <序号>` | 删除指定配置 |
| `,cai list` | 查看所有目标配置 |
| `,cai emoji <表情1> [表情2] [表情3]>` | 设置点踩表情（Premium 用户最多 3 个） |
| `,cai stats` | 查看统计信息 |
| `,cai help` | 查看帮助信息 |

## 使用示例

### 设置目标
```
,cai set 123456789 -1001234567890 3600
```
对用户 123456789 在群组 -1001234567890 的发言进行点踩，间隔 1 小时

### 设置表情（普通用户）
```
,cai emoji 👎
```

### 设置表情（Premium 用户）
```
,cai emoji 👎 😆 🤔
```

### 查看配置
```
,cai list
```

## 技术实现

- **配置管理**：CAIConfig 类负责配置的加载、保存和验证
- **Premium 检测**：通过 `bot.get_me()` 获取账户的 `is_premium` 属性
- **多表情支持**：使用 `get_reactions()` 函数将表情列表转换为正确的反应类型
- **自动监听**：通过 `@listener` 装饰器监听所有消息，自动匹配目标并执行点踩

## 注意事项

- Premium 状态会在首次执行命令时自动检测并保存
- 旧配置文件会自动兼容（单个 emoji 字段自动转换为 emojis 列表）
- 自定义表情 ID 是纯数字，可通过 `,get_reactions` 命令获取
- 建议频率限制至少 60 秒，避免频繁操作
